(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(35)},35:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),i=n.n(r),c=n(20),l=n(5),d=n(2),s=n(7),u=n.n(s);n(29);u.a.initializeApp({apiKey:"AIzaSyC5mVxaorL_LmNWasC5LNmAC3cmlQ-5vFM",authDomain:"story-maker-85706.firebaseapp.com",databaseURL:"https://story-maker-85706.firebaseio.com",projectId:"story-maker-85706",storageBucket:"story-maker-85706.appspot.com",messagingSenderId:"105986550181",appId:"1:105986550181:web:81ec40d053faad45"});var m=u.a.database(),p=n(3),f=n(1),h=n(4),y={primary:"#1c4265",primaryVariant:Object(h.a)(.15,"#1c4265"),secondary:Object(h.b)(.5,"#1c4265"),secondaryVariant:Object(h.b)(.15,"#1c4265")};function g(){var e=Object(p.a)(["\n    cursor: pointer;\n\n    border-color: ",";\n  \n    :hover {\n      border-color: ",";\n    }\n\n    :active {\n      background: ",";\n      border-color: ",";\n    }\n  "]);return g=function(){return e},e}var b=f.c.button.withConfig({displayName:"UIstyle__ButtonBase",componentId:"velvdk-0"})(["all:unset;background:",";margin:5px;text-align:center;border:solid 3px ",";",""],y.secondaryVariant,y.primary,function(e){return e.onClick&&Object(f.b)(g(),y.primaryVariant,y.secondaryVariant,y.primary,y.primaryVariant)}),v=Object(f.c)(b).withConfig({displayName:"UIstyle__Button",componentId:"velvdk-1"})(["flex:1;border-radius:5px;padding:7px;"]),x=Object(f.c)(b).withConfig({displayName:"UIstyle__RoundButton",componentId:"velvdk-2"})(["border-radius:100%;flex:unset;overflow:hidden;height:80px;width:80px;@media (orientation:portrait){height:50px;width:50px;}"]),w=f.c.div.withConfig({displayName:"UIstyle__Base",componentId:"velvdk-3"})(["display:flex;justify-content:center;"]),I=Object(f.c)(w).withConfig({displayName:"UIstyle__Row",componentId:"velvdk-4"})([""]),j=Object(f.c)(w).withConfig({displayName:"UIstyle__Column",componentId:"velvdk-5"})(["flex:1;flex-direction:column;"]),C=Object(f.c)(I).withConfig({displayName:"Homestyle__Wrapper",componentId:"sc-1vl6oc7-0"})(["background:",";color:",";flex:1;@media (orientation:portrait){flex-direction:column;}"],y.primary,y.secondary),O=f.c.textarea.withConfig({displayName:"Homestyle__TextInput",componentId:"sc-1vl6oc7-1"})(["all:unset;background:",";padding:10px;border-radius:10px;margin:5px;height:55px;::placeholder{color:","}"],y.primaryVariant,y.secondaryVariant);var k=function(e,t){var n=[],a=t.x-e.x,o=t.y-e.y,r=Math.abs(a),i=Math.abs(o),c=a>0?1:-1,l=o>0?1:-1,d=0;if(r>i)for(var s=e.x,u=e.y;c<0?s>=t.x:s<=t.x;s+=c)n.push({x:s,y:u}),(d+=i)<<1>=r&&(u+=l,d-=r);else for(var m=e.x,p=e.y;l<0?p>=t.y:p<=t.y;p+=l)n.push({x:m,y:p}),(d+=r)<<1>=i&&(m+=c,d-=i);return n},E=f.c.div.withConfig({displayName:"Drawingstyle__Wrapper",componentId:"sc-1makj1j-0"})(["flex:1;background:",";position:relative;overflow:hidden;margin:5px;border-radius:10px;overflow:hidden;"],y.secondaryVariant),_=f.c.img.withConfig({displayName:"Drawingstyle__DrawingImage",componentId:"sc-1makj1j-1"})(["width:100%;height:100%;object-fit:contain;position:absolute;top:0;left:0;image-rendering:pixelated;"]),U=f.c.canvas.withConfig({displayName:"Drawingstyle__Canvas",componentId:"sc-1makj1j-2"})(["cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0;opacity:0;touch-action:none;"]),N={width:80,height:60},R=function(e){var t=e.onChange,n=e.dataURL,r=Object(a.useState)(),i=Object(d.a)(r,2),c=i[0],l=i[1],s=Object(a.useState)(),u=Object(d.a)(s,2),m=u[0],p=u[1],f=Object(a.useState)(!1),h=Object(d.a)(f,2),g=h[0],b=h[1],v=Object(a.useState)(),x=Object(d.a)(v,2),w=x[0],I=x[1];function j(e){if(c&&m){var n=function(e){var t=m.getBoundingClientRect(),n=t.width,a=t.height,o=t.left,r=t.top,i=N.height/N.width,c=a/n,l=i<c?n/N.width:a/N.height,d={x:o,y:r};return i>c?d.x+=(n-N.width*l)/2:d.y+=(a-N.height*l)/2,{x:Math.floor((e.clientX-d.x)/l),y:Math.floor((e.clientY-d.y)/l)}}(e),a=k(w||n,n),o=!0,r=!1,i=void 0;try{for(var l,d=a[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var s=l.value;c.fillRect(s.x,s.y,1,1)}}catch(u){r=!0,i=u}finally{try{o||null==d.return||d.return()}finally{if(r)throw i}}t(m.toDataURL()),I(n)}}function C(){b(!0)}function O(){b(!1),I(void 0)}return Object(a.useEffect)(function(){if(c&&m&&(n||(c.fillStyle=y.secondary,c.fillRect(0,0,m.width,m.height),t(m.toDataURL())),c.fillStyle=y.primary,!g)){var e=new Image;e.onload=function(){c.drawImage(e,0,0)},e.src=n}},[c,m,n,g,t]),o.a.createElement(E,null,n&&o.a.createElement(_,{src:n}),o.a.createElement(U,{ref:function(e){!e||m||c||(p(e),l(e.getContext("2d")||void 0))},onMouseMove:function(e){g&&j(e)},onTouchMove:function(e){j(e.touches[0])},onTouchStart:function(e){C(),j(e.touches[0])},onMouseDown:function(e){C(),j(e)},onMouseUp:O,onTouchEnd:O,onMouseOut:O,width:N.width,height:N.height}))},L=n(21),S=Object(f.c)(j).withConfig({displayName:"PanelConnectionsstyle__Wrapper",componentId:"sc-1hygbo8-0"})(["flex-direction:column;margin:10px;display:flex;flex:unset;@media (orientation:portrait){flex-direction:row;}"]),P=Object(f.c)(I).withConfig({displayName:"PanelConnectionsstyle__PanelsWrapper",componentId:"sc-1hygbo8-1"})(["@media (orientation:portrait){flex-direction:column;}align-items:center;justify-content:center;"]),M=f.c.div.withConfig({displayName:"PanelConnectionsstyle__NewPannelText",componentId:"sc-1hygbo8-2"})(["margin-top:-22px;font-size:5em;@media (orientation:portrait){font-size:3.8em;}"]);function V(){var e=Object(p.a)(["\n  width: 100%;\n  height: 100%;\n"]);return V=function(){return e},e}var B=Object(f.b)(V()),D=f.c.img.withConfig({displayName:"Thumbnailstyle__ThumbnailImage",componentId:"sc-33co5w-0"})([""," flex:1;"],B),T=f.c.div.withConfig({displayName:"Thumbnailstyle__Placeholder",componentId:"sc-33co5w-1"})([""," padding-bottom:75%;background-color:",";"],B,y.secondary),z=function(e){var t=e.src;return t?o.a.createElement(D,{src:t}):o.a.createElement(T,null)},W=function(e){var t=e.currentPanel,n=e.prevPanel,a=e.nextPanels,r=e.onConnectionClick,i=e.onNewPanelClick;return o.a.createElement(S,null,n&&o.a.createElement(P,null,o.a.createElement(x,{onClick:function(){return r(n)}},o.a.createElement(z,{src:n.dataURL}))),!n&&o.a.createElement(P,null,o.a.createElement(x,null)),o.a.createElement(P,null,o.a.createElement(x,null,o.a.createElement(z,{src:t.dataURL}))),o.a.createElement(P,null,a.map(function(e){return o.a.createElement(x,{key:e.id,onClick:function(){return r(e)}},o.a.createElement(z,{src:e.dataURL}))}),Object.keys(Object(L.a)(Array(2-a.length))).map(function(e){return o.a.createElement(x,{key:e,onClick:i},o.a.createElement(M,null,"+"))})))},A=function(){var e=Object(a.useState)(0),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)([{dataURL:"",text:"",nextIds:[],id:0}]),c=Object(d.a)(i,2),s=c[0],u=c[1],p=s[n],f=void 0!==p.prevId?s[p.prevId]:void 0,h=p.nextIds.map(function(e){return s[e]});return o.a.createElement(C,null,o.a.createElement(j,null,o.a.createElement(R,{onChange:function(e){u(function(t){var a=t.slice(0);return a[n]=Object(l.a)({},a[n],{dataURL:e}),a})},dataURL:p.dataURL}),o.a.createElement(O,{onChange:function(e){var t=s.slice(0);t[n]=Object(l.a)({},t[n],{text:e.target.value}),u(t)},value:p.text,placeholder:"Insert panel text here"}),o.a.createElement(I,null,o.a.createElement(v,{onClick:function(){m.ref("stories").limitToLast(1).once("value").then(function(e){var t=e.val();if(t){var n=Object.values(t)[0].panels;u(n.map(function(e){return{nextIds:JSON.parse(e.nextIds),dataURL:e.dataURL,text:e.text,prevId:e.prevId,id:e.id}}))}})}},"Load"),o.a.createElement(v,{onClick:function(){var e={panels:s.map(function(e){return Object(l.a)({nextIds:JSON.stringify(e.nextIds),dataURL:e.dataURL,text:e.text,id:e.id},void 0!==e.prevId?{prevId:e.prevId}:{})})};m.ref("stories").push(e).then(function(){return console.log("done publishing")})}},"Save"))),o.a.createElement(W,{prevPanel:f,currentPanel:p,nextPanels:h,onConnectionClick:function(e){r(e.id)},onNewPanelClick:function(){u(function(e){var t=e.slice(0);return t[n].nextIds.push(t.length),t.push({dataURL:"",text:"",prevId:n,nextIds:[],id:t.length}),t})}}))};function F(){var e=Object(p.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background: ",";\n  }\n\n  #root {\n    display: flex;\n    height: 100vh;\n  }\n\n  *{\n    user-select: none;\n  }\n"]);return F=function(){return e},e}var J=Object(f.a)(F(),y.primary),H=Object(c.hot)(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(J,null),o.a.createElement(A,null))});i.a.render(o.a.createElement(H,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.8edf333b.chunk.js.map