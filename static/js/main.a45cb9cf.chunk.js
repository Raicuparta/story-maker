(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},33:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(3),r=n.n(i),c=n(6),l=n(2),s=n(8),d=n.n(s);n(27);d.a.initializeApp({apiKey:"AIzaSyC5mVxaorL_LmNWasC5LNmAC3cmlQ-5vFM",authDomain:"story-maker-85706.firebaseapp.com",databaseURL:"https://story-maker-85706.firebaseio.com",projectId:"story-maker-85706",storageBucket:"story-maker-85706.appspot.com",messagingSenderId:"105986550181",appId:"1:105986550181:web:81ec40d053faad45"});var u=d.a.database(),p=n(1),m=n(5),h={primary:"#84567b",primaryVariant:Object(m.a)(.15,"#84567b"),secondary:Object(m.b)(.5,"#84567b"),secondaryVariant:Object(m.b)(.15,"#84567b")},f=p.c.button.withConfig({displayName:"UI__Button",componentId:"sc-34y89c-0"})(["all:unset;flex:1;padding:7px;background:",";border-radius:5px;margin:5px;text-align:center;cursor:pointer;border:solid 3px ",";:hover{background:",";}:active{border-color:",";}"],h.secondaryVariant,h.secondaryVariant,h.primary,h.primaryVariant),g=p.c.div.withConfig({displayName:"UI__Row",componentId:"sc-34y89c-1"})(["display:flex;"]),x=p.c.div.withConfig({displayName:"UI__Column",componentId:"sc-34y89c-2"})(["flex:1;display:flex;flex-direction:column;"]),y=n(20),b=p.c.path.withConfig({displayName:"DrawingSVGstyle__Path",componentId:"sc-1fbho8x-0"})(["fill:none;stroke-width:5px;stroke:",";stroke-linejoin:round;stroke-linecap:round;"],h.primaryVariant),w=p.c.svg.withConfig({displayName:"DrawingSVGstyle__SVG",componentId:"sc-1fbho8x-1"})(["height:100%;width:100%;"]),v=400,C=300,I=function(e){var t="M "+e.line.map(function(e){return"".concat(e.x," ").concat(e.y)}).join(" L ");return o.a.createElement(b,{d:t})},E=function(e){var t=e.lines;return o.a.createElement(w,{viewBox:"0 0 ".concat(v," ").concat(C),preserveAspectRatio:"xMidYMid meet"},o.a.createElement("rect",{width:"100%",height:"100%",fill:h.secondary}),t.map(function(e,t){return o.a.createElement(I,{key:t,line:e})}))},j=p.c.div.withConfig({displayName:"Drawingstyle__Wrapper",componentId:"sc-1v97gwe-0"})(["flex:1;touch-action:none;"]),O={width:400,height:300},_=function(e){var t=e.onInputDown,n=e.onInputMove,i=e.lines,r=Object(a.useState)(!1),c=Object(l.a)(r,2),s=c[0],d=c[1],u=Object(a.useRef)(null);function p(){d(!1)}function m(e){var t=u.current.getBoundingClientRect(),n=t.width,a=t.height,o=t.left,i=t.top,r=O.height/O.width,c=a/n,l=r<c?n/O.width:a/O.height,s={x:0,y:0};return r>c?s.x+=(n-O.width*l)/2:s.y+=(a-O.height*l)/2,{x:(e.clientX-s.x)/l-o,y:(e.clientY-s.y)/l-i}}Object(a.useEffect)(function(){return document.addEventListener("mouseup",p),function(){document.removeEventListener("mouseup",p)}},[]);var h=t&&n?{onMouseDown:function(e){e.preventDefault(),d(!0),0===e.button&&t(m(e))},onTouchStart:function(e){e.preventDefault(),d(!0),t(m(e.touches[0]))}}:{},f=s&&t&&n?{onMouseMove:function(e){e.preventDefault(),n(m(e))},onTouchMove:function(e){e.preventDefault(),n(m(e.touches[0]))}}:{};return o.a.createElement(j,Object.assign({},h,f,{ref:u}),o.a.createElement(E,{lines:i}))},k=p.c.div.withConfig({displayName:"DrawAreastyle__Wrapper",componentId:"sc-1jzetc2-0"})(["margin:5px;overflow:hidden;cursor:crosshair;display:flex;justify-content:center;flex:1;background:",";border-radius:10px;"],h.secondaryVariant),N=function(e){var t=e.lines,n=e.onChange;return o.a.createElement(k,null,o.a.createElement(_,{onInputDown:function(e){n(t.concat([[e]]))},onInputMove:function(e){n([].concat(Object(y.a)(t.slice(0,t.length-1)),[t[t.length-1].concat([e])]))},lines:t}))},S=n(4);function V(){var e=Object(S.a)(["\n    border-color: ",";\n    :hover {\n      border-color: ",";\n    }\n  "]);return V=function(){return e},e}var D=p.c.div.withConfig({displayName:"FlowChartstyle__Wrapper",componentId:"sc-10bnhmv-0"})(["border:3px solid ",";border-radius:5px;margin:5px;flex:1;display:flex;flex-direction:column;align-items:center;padding:10px;position:relative;overflow:auto;margin-bottom:20px;"],h.secondaryVariant),M=p.c.div.withConfig({displayName:"FlowChartstyle__Node",componentId:"sc-10bnhmv-1"})(["width:20px;height:20px;background:",";border-radius:100%;border:5px solid ",";cursor:pointer;:hover{border-color:",";}",""],h.secondary,h.primary,h.secondaryVariant,function(e){return e.isSelected&&Object(p.b)(V(),h.primaryVariant,h.primaryVariant)}),F=p.c.div.withConfig({displayName:"FlowChartstyle__Preview",componentId:"sc-10bnhmv-2"})(["border-radius:10px;border:5px solid ",";overflow:hidden;position:relative;right:122px;bottom:5px;width:100px;"],h.secondaryVariant),L=p.c.div.withConfig({displayName:"FlowChartstyle__TextPreview",componentId:"sc-10bnhmv-3"})(["font-size:10px;height:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background:",";padding:5px;margin-top:-5px;"],h.primaryVariant),R=p.c.div.withConfig({displayName:"FlowChartstyle__NodeRow",componentId:"sc-10bnhmv-4"})(["display:flex;flex-direction:column;align-items:center;flex:1;"]),B=p.c.div.withConfig({displayName:"FlowChartstyle__NodeFork",componentId:"sc-10bnhmv-5"})(["display:flex;flex:1;"]),J=function(e){var t=e.panel;return o.a.createElement(F,null,o.a.createElement(E,{lines:t.drawing}),o.a.createElement(L,null,t.text))},U=function(e){var t=e.panels,n=e.selected,i=e.onNodeClick,r=Object(a.useState)(-1),c=Object(l.a)(r,2),s=c[0],d=c[1],u=Object(a.useState)({width:0,height:0,top:0,left:0}),p=Object(l.a)(u,2),m=p[0],h=p[1],f=Object(a.useCallback)(function(e){if(null!==e){var t=e.getBoundingClientRect(),n=t.width,a=t.height,o=t.top,i=t.left;h({width:n,height:a,top:o,left:i})}},[]);return o.a.createElement(D,{ref:f},o.a.createElement(function e(a){var r=a.id,c=a.position,l=a.depth,u=t[r],p=m.width/Math.pow(l,2);return o.a.createElement(R,null,o.a.createElement(M,{style:{position:"absolute",top:"".concat(c.y,"px"),left:"".concat(m.width/2+c.x,"px")},isSelected:n===r,onClick:function(){return i(u,r)},onMouseEnter:function(){return d(r)},onMouseLeave:function(){return d(-1)}},s===r&&n!==r&&o.a.createElement(J,{panel:u})),u.nextId&&o.a.createElement(e,{id:u.nextId,position:{x:c.x,y:c.y+40},depth:l}),u.choices&&o.a.createElement(B,null,u.choices.map(function(t,n){return o.a.createElement(e,{key:t.id,id:t.id,position:{x:c.x-p+2*p*n,y:c.y+40},depth:l+1})})))},{id:0,depth:2,position:{x:0,y:10}}))},z=Object(p.c)(g).withConfig({displayName:"Homestyle__Wrapper",componentId:"sc-1qsygr6-0"})(["background:",";color:",";flex:1;@media (orientation:portrait){flex-direction:column;}"],h.primary,h.secondary),A=p.c.textarea.withConfig({displayName:"Homestyle__TextInput",componentId:"sc-1qsygr6-1"})(["all:unset;background:",";padding:10px;border-radius:10px;margin:5px;height:55px;::placeholder{color:","}"],h.primaryVariant,h.secondaryVariant),P=Object(p.c)(x).withConfig({displayName:"Homestyle__DrawColumn",componentId:"sc-1qsygr6-2"})(["flex:2;"]),T=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)([{drawing:[],text:""}]),s=Object(l.a)(r,2),d=s[0],p=s[1];return Object(a.useEffect)(function(){i(d.length-1)},[d.length]),o.a.createElement(z,null,o.a.createElement(P,null,o.a.createElement(N,{lines:d[n].drawing,onChange:function(e){p(function(t){var a=t.slice(0);return a[n]=Object(c.a)({},a[n],{drawing:e}),a})}}),o.a.createElement(A,{onChange:function(e){var t=d.slice(0);t[n]=Object(c.a)({},t[n],{text:e.target.value}),p(t)},value:d[n].text,placeholder:"Insert panel text here"}),o.a.createElement(g,null,o.a.createElement(f,{onClick:function(){u.ref("stories").limitToLast(1).once("value").then(function(e){var t=e.val();if(t){var n=Object.values(t)[0].panels;p(n.map(function(e){return{drawing:JSON.parse(e.drawing),choices:e.choices?JSON.parse(e.choices):void 0,text:e.text,nextId:e.nextId}}))}})}},"[Load From Database]"),o.a.createElement(f,{onClick:function(){u.ref("stories").push({panels:d.map(function(e){return Object(c.a)({},e.choices?{choices:JSON.stringify(e.choices)}:{},e.nextId?{nextId:e.nextId}:{},{drawing:JSON.stringify(e.drawing),text:e.text})})}).then(function(){return console.log("done publishing")})}},"Publish"))),o.a.createElement(x,null,o.a.createElement(g,null,o.a.createElement(f,{onClick:function(){d[n].nextId||d[n].choices||p(function(e){var t=e.slice(0);return t[n].choices=[{id:t.length},{id:t.length+1}],t.push({drawing:[],text:""}),t.push({drawing:[],text:""}),t})}},"+ Choice"),o.a.createElement(f,{onClick:function(){d[n].nextId||d[n].choices||p(function(e){var t=e.slice(0);return t[n].nextId=d.length,t.push({drawing:[],text:""}),t})}},"+ Panel")),o.a.createElement(U,{panels:d,onNodeClick:function(e,t){i(t)},selected:n})))};function W(){var e=Object(S.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background: ",";\n  }\n\n  #root {\n    display: flex;\n    height: 100vh;\n  }\n"]);return W=function(){return e},e}var H=Object(p.a)(W(),h.primary);r.a.render(o.a.createElement(o.a.Fragment,null,o.a.createElement(H,null),o.a.createElement(T,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.a45cb9cf.chunk.js.map