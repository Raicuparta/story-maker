(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(32)},32:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(3),r=n.n(o),c=n(6),l=n(2),d=n(8),s=n.n(d);n(26);s.a.initializeApp({apiKey:"AIzaSyC5mVxaorL_LmNWasC5LNmAC3cmlQ-5vFM",authDomain:"story-maker-85706.firebaseapp.com",databaseURL:"https://story-maker-85706.firebaseio.com",projectId:"story-maker-85706",storageBucket:"story-maker-85706.appspot.com",messagingSenderId:"105986550181",appId:"1:105986550181:web:81ec40d053faad45"});var p=s.a.database(),u=n(1),h=n(5),m={primary:"#4c7d55",primaryVariant:Object(h.a)(.15,"#4c7d55"),secondary:Object(h.b)(.5,"#4c7d55"),secondaryVariant:Object(h.b)(.15,"#4c7d55")},f=u.c.button.withConfig({displayName:"UI__Button",componentId:"sc-34y89c-0"})(["all:unset;flex:1;padding:7px;background:",";border-radius:5px;margin:5px;text-align:center;cursor:pointer;border:solid 3px ",";:hover{background:",";}:active{border-color:",";}"],m.secondaryVariant,m.secondaryVariant,m.primary,m.primaryVariant),g=u.c.div.withConfig({displayName:"UI__Row",componentId:"sc-34y89c-1"})(["display:flex;"]),x=u.c.div.withConfig({displayName:"UI__Column",componentId:"sc-34y89c-2"})(["flex:1;display:flex;flex-direction:column;"]),y=n(4);function b(){var e=Object(y.a)(["\n    border-color: ",";\n    :hover {\n      border-color: ",";\n    }\n  "]);return b=function(){return e},e}var w=u.c.div.withConfig({displayName:"FlowChartstyle__Wrapper",componentId:"sc-10bnhmv-0"})(["border:3px solid ",";border-radius:5px;margin:5px;flex:1;display:flex;flex-direction:column;align-items:center;padding:10px;position:relative;overflow:auto;margin-bottom:20px;"],m.secondaryVariant),v=u.c.div.withConfig({displayName:"FlowChartstyle__Node",componentId:"sc-10bnhmv-1"})(["width:20px;height:20px;background:",";border-radius:100%;border:5px solid ",";cursor:pointer;:hover{border-color:",";}",""],m.secondary,m.primary,m.secondaryVariant,function(e){return e.isSelected&&Object(u.b)(b(),m.primaryVariant,m.primaryVariant)}),C=u.c.div.withConfig({displayName:"FlowChartstyle__Preview",componentId:"sc-10bnhmv-2"})(["border-radius:10px;border:5px solid ",";overflow:hidden;position:relative;right:122px;bottom:5px;width:100px;"],m.secondaryVariant),O=u.c.div.withConfig({displayName:"FlowChartstyle__TextPreview",componentId:"sc-10bnhmv-3"})(["font-size:10px;height:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background:",";padding:5px;margin-top:-5px;"],m.primaryVariant),I=u.c.div.withConfig({displayName:"FlowChartstyle__NodeRow",componentId:"sc-10bnhmv-4"})(["display:flex;flex-direction:column;align-items:center;flex:1;"]),j=u.c.div.withConfig({displayName:"FlowChartstyle__NodeFork",componentId:"sc-10bnhmv-5"})(["display:flex;flex:1;"]),E=function(e){var t=e.panel;return i.a.createElement(C,null,i.a.createElement(O,null,t.text))},k=function(e){var t=e.panels,n=e.selected,o=e.onNodeClick,r=Object(a.useState)(-1),c=Object(l.a)(r,2),d=c[0],s=c[1],p=Object(a.useState)({width:0,height:0,top:0,left:0}),u=Object(l.a)(p,2),h=u[0],m=u[1],f=Object(a.useCallback)(function(e){if(null!==e){var t=e.getBoundingClientRect(),n=t.width,a=t.height,i=t.top,o=t.left;m({width:n,height:a,top:i,left:o})}},[]);return i.a.createElement(w,{ref:f},i.a.createElement(function e(a){var r=a.id,c=a.position,l=a.depth,p=t[r],u=h.width/Math.pow(l,2);return i.a.createElement(I,null,i.a.createElement(v,{style:{position:"absolute",top:"".concat(c.y,"px"),left:"".concat(h.width/2+c.x,"px")},isSelected:n===r,onClick:function(){return o(p,r)},onMouseEnter:function(){return s(r)},onMouseLeave:function(){return s(-1)}},d===r&&n!==r&&i.a.createElement(E,{panel:p})),p.nextId&&i.a.createElement(e,{id:p.nextId,position:{x:c.x,y:c.y+40},depth:l}),p.choices&&i.a.createElement(j,null,p.choices.map(function(t,n){return i.a.createElement(e,{key:t.id,id:t.id,position:{x:c.x-u+2*u*n,y:c.y+40},depth:l+1})})))},{id:0,depth:2,position:{x:0,y:10}}))},_=Object(u.c)(g).withConfig({displayName:"Homestyle__Wrapper",componentId:"sc-1qsygr6-0"})(["background:",";color:",";flex:1;@media (orientation:portrait){flex-direction:column;}"],m.primary,m.secondary),N=u.c.textarea.withConfig({displayName:"Homestyle__TextInput",componentId:"sc-1qsygr6-1"})(["all:unset;background:",";padding:10px;border-radius:10px;margin:5px;height:55px;::placeholder{color:","}"],m.primaryVariant,m.secondaryVariant),S=Object(u.c)(x).withConfig({displayName:"Homestyle__DrawColumn",componentId:"sc-1qsygr6-2"})(["flex:2;"]),V=u.c.canvas.withConfig({displayName:"Canvasstyle__Wrapper",componentId:"sc-1t9lkl3-0"})(["margin:5px;cursor:crosshair;background:",";border-radius:10px;flex:1;object-fit:contain;"],m.secondaryVariant),F={width:400,height:300},M=function(e){var t=e.onChange,n=e.dataURL,o=Object(a.useState)(),r=Object(l.a)(o,2),c=r[0],d=r[1],s=Object(a.useState)(),p=Object(l.a)(s,2),u=p[0],h=p[1],f=Object(a.useState)(!1),g=Object(l.a)(f,2),x=g[0],y=g[1],b=Object(a.useState)(),w=Object(l.a)(b,2),v=w[0],C=w[1];function O(){y(!1),C(void 0),u&&c&&x&&(t&&t(u.toDataURL()),c.closePath())}return Object(a.useEffect)(function(){function e(){c&&u&&(c.fillStyle=m.secondary,c.fillRect(0,0,u.width,u.height))}if(n&&c){var t=new Image;t.onload=function(){e(),c.drawImage(t,0,0)},t.src=n}else e()},[c,u,n]),i.a.createElement(V,{ref:function(e){e&&(h(e),d(e.getContext("2d")||void 0))},onMouseMove:function(e){if(x&&u&&c){var t=function(e){var t=u.getBoundingClientRect(),n=t.width,a=t.height,i=t.left,o=t.top,r=F.height/F.width,c=a/n,l=r<c?n/F.width:a/F.height,d={x:0,y:0};return r>c?d.x+=(n-F.width*l)/2:d.y+=(a-F.height*l)/2,{x:(e.clientX-d.x)/l-i,y:(e.clientY-d.y)/l-o}}(e);c.moveTo((v||t).x,(v||t).y),c.lineTo(t.x,t.y),c.strokeStyle=m.primaryVariant,c.lineWidth=1,c.filter="url(#remove-alpha)",c.stroke(),C(t)}},onMouseDown:function(){y(!0),c&&c.beginPath()},onMouseUp:O,onMouseOut:function(){O()},onMouseEnter:function(){},width:F.width,height:F.height})},L=function(){var e=Object(a.useState)(0),t=Object(l.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)([{drawing:"",text:""}]),d=Object(l.a)(r,2),s=d[0],u=d[1];return Object(a.useEffect)(function(){o(s.length-1)},[s.length]),i.a.createElement(_,null,i.a.createElement(S,null,i.a.createElement(M,{onChange:function(e){u(function(t){var a=t.slice(0);return a[n]=Object(c.a)({},a[n],{drawing:e}),a})},dataURL:s[n].drawing}),i.a.createElement(N,{onChange:function(e){var t=s.slice(0);t[n]=Object(c.a)({},t[n],{text:e.target.value}),u(t)},value:s[n].text,placeholder:"Insert panel text here"}),i.a.createElement(g,null,i.a.createElement(f,{onClick:function(){p.ref("stories").limitToLast(1).once("value").then(function(e){var t=e.val();if(t){var n=Object.values(t)[0].panels;u(n.map(function(e){return{drawing:JSON.parse(e.drawing),choices:e.choices?JSON.parse(e.choices):void 0,text:e.text,nextId:e.nextId}}))}})}},"[Load From Database]"),i.a.createElement(f,{onClick:function(){p.ref("stories").push({panels:s.map(function(e){return Object(c.a)({},e.choices?{choices:JSON.stringify(e.choices)}:{},e.nextId?{nextId:e.nextId}:{},{drawing:JSON.stringify(e.drawing),text:e.text})})}).then(function(){return console.log("done publishing")})}},"Publish"))),i.a.createElement(x,null,i.a.createElement(g,null,i.a.createElement(f,{onClick:function(){s[n].nextId||s[n].choices||u(function(e){var t=e.slice(0);return t[n].choices=[{id:t.length},{id:t.length+1}],t.push({drawing:"",text:""}),t.push({drawing:"",text:""}),t})}},"+ Choice"),i.a.createElement(f,{onClick:function(){s[n].nextId||s[n].choices||u(function(e){var t=e.slice(0);return t[n].nextId=s.length,t.push({drawing:"",text:""}),t})}},"+ Panel")),i.a.createElement(k,{panels:s,onNodeClick:function(e,t){o(t)},selected:n})))};function R(){var e=Object(y.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background: ",";\n  }\n\n  #root {\n    display: flex;\n    height: 100vh;\n  }\n"]);return R=function(){return e},e}var U=Object(u.a)(R(),m.primary);r.a.render(i.a.createElement(i.a.Fragment,null,i.a.createElement(U,null),i.a.createElement(L,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.ba8e84d8.chunk.js.map