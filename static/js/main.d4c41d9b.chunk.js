(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(34)},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(17),o=n.n(i),c=n(20),l=n(5),d=n(2),s=n(7),u=n.n(s);n(28);u.a.initializeApp({apiKey:"AIzaSyC5mVxaorL_LmNWasC5LNmAC3cmlQ-5vFM",authDomain:"story-maker-85706.firebaseapp.com",databaseURL:"https://story-maker-85706.firebaseio.com",projectId:"story-maker-85706",storageBucket:"story-maker-85706.appspot.com",messagingSenderId:"105986550181",appId:"1:105986550181:web:81ec40d053faad45"});var m=u.a.database(),p=n(1),f=n(4),g={primary:"#1c4265",primaryVariant:Object(f.a)(.15,"#1c4265"),secondary:Object(f.b)(.5,"#1c4265"),secondaryVariant:Object(f.b)(.15,"#1c4265")},h=p.c.button.withConfig({displayName:"UIstyle__Button",componentId:"velvdk-0"})(["all:unset;flex:1;padding:7px;background:",";border-radius:5px;margin:5px;text-align:center;cursor:pointer;border:solid 3px ",";:hover{border-color:",";}:active{background:",";}"],g.secondaryVariant,g.secondaryVariant,g.primaryVariant,g.primary),b=p.c.div.withConfig({displayName:"UIstyle__Row",componentId:"velvdk-1"})(["display:flex;"]),y=p.c.div.withConfig({displayName:"UIstyle__Column",componentId:"velvdk-2"})(["flex:1;display:flex;flex-direction:column;"]),v=Object(p.c)(b).withConfig({displayName:"Homestyle__Wrapper",componentId:"sc-1vl6oc7-0"})(["background:",";color:",";flex:1;@media (orientation:portrait){flex-direction:column;}"],g.primary,g.secondary),x=p.c.textarea.withConfig({displayName:"Homestyle__TextInput",componentId:"sc-1vl6oc7-1"})(["all:unset;background:",";padding:10px;border-radius:10px;margin:5px;height:55px;::placeholder{color:","}"],g.primaryVariant,g.secondaryVariant),w=Object(p.c)(y).withConfig({displayName:"Homestyle__DrawColumn",componentId:"sc-1vl6oc7-2"})(["flex:2;"]),I=p.c.canvas.withConfig({displayName:"Drawingstyle__Canvas",componentId:"sc-1makj1j-0"})(["margin:5px;cursor:crosshair;background:",";border-radius:10px;flex:1;object-fit:contain;"],g.secondaryVariant),j={width:400,height:300},O=function(e){var t=e.onChange,n=e.dataURL,i=Object(a.useState)(),o=Object(d.a)(i,2),c=o[0],l=o[1],s=Object(a.useState)(),u=Object(d.a)(s,2),m=u[0],p=u[1],f=Object(a.useState)(!1),h=Object(d.a)(f,2),b=h[0],y=h[1],v=Object(a.useState)(),x=Object(d.a)(v,2),w=x[0],O=x[1];function k(){y(!1),O(void 0),m&&c&&b&&t&&t(m.toDataURL())}return Object(a.useEffect)(function(){function e(){c&&m&&(c.fillStyle=g.secondary,c.fillRect(0,0,m.width,m.height))}if(n&&c){var t=new Image;t.onload=function(){e(),c.drawImage(t,0,0)},t.src=n}else e()},[c,m,n]),r.a.createElement(I,{ref:function(e){!e||m||c||(p(e),l(e.getContext("2d")||void 0))},onMouseMove:function(e){if(b&&m&&c){var t=function(e){var t=m.getBoundingClientRect(),n=t.width,a=t.height,r=t.left,i=t.top,o=j.height/j.width,c=a/n,l=o<c?n/j.width:a/j.height,d={x:0,y:0};return o>c?d.x+=(n-j.width*l)/2:d.y+=(a-j.height*l)/2,{x:(e.clientX-d.x)/l-r,y:(e.clientY-d.y)/l-i}}(e);c.beginPath(),c.moveTo((w||t).x,(w||t).y),c.lineTo(t.x,t.y),c.strokeStyle=g.primaryVariant,c.lineWidth=1,c.stroke(),c.closePath(),O(t)}},onMouseDown:function(){y(!0),c&&c.beginPath()},onMouseUp:k,onMouseOut:function(){k()},onMouseEnter:function(){},width:j.width,height:j.height})},k=n(3);function C(){var e=Object(k.a)(["\n  width: 100%;\n  border-radius: 5px;\n  margin-top: 5px;\n"]);return C=function(){return e},e}var E=Object(p.b)(C()),_=p.c.img.withConfig({displayName:"Thumbnailstyle__ThumbnailImage",componentId:"sc-33co5w-0"})([""," flex:1;"],E),S=p.c.div.withConfig({displayName:"Thumbnailstyle__Placeholder",componentId:"sc-33co5w-1"})([""," padding-bottom:75%;background-color:",";"],E,g.secondary),N=function(e){var t=e.src;return t?r.a.createElement(_,{src:t}):r.a.createElement(S,null)},U=function(){var e=Object(a.useState)(0),t=Object(d.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([{drawing:"",text:"",nextIds:[],id:0}]),c=Object(d.a)(o,2),s=c[0],u=c[1],p=s[n],f=void 0!==p.prevId&&s[p.prevId],g=p.nextIds.map(function(e){return s[e]});function I(e){i(e.id)}return r.a.createElement(v,null,r.a.createElement(w,null,r.a.createElement(O,{onChange:function(e){u(function(t){var a=t.slice(0);return a[n]=Object(l.a)({},a[n],{drawing:e}),a})},dataURL:p.drawing}),r.a.createElement(x,{onChange:function(e){var t=s.slice(0);t[n]=Object(l.a)({},t[n],{text:e.target.value}),u(t)},value:p.text,placeholder:"Insert panel text here"}),r.a.createElement(b,null,r.a.createElement(h,{onClick:function(){m.ref("stories").limitToLast(1).once("value").then(function(e){var t=e.val();if(t){var n=Object.values(t)[0].panels;u(n.map(function(e){return{drawing:e.drawing,nextIds:JSON.parse(e.nextIds),text:e.text,prevId:e.prevId,id:e.id}}))}})}},"[Load From Database]"),r.a.createElement(h,{onClick:function(){var e={panels:s.map(function(e){return Object(l.a)({nextIds:JSON.stringify(e.nextIds),drawing:e.drawing,text:e.text,id:e.id},void 0!==e.prevId?{prevId:e.prevId}:{})})};m.ref("stories").push(e).then(function(){return console.log("done publishing")})}},"Publish"))),r.a.createElement(y,null,r.a.createElement(b,null,r.a.createElement(y,null,f&&r.a.createElement(h,{onClick:function(){return I(f)}},"Previous Panel",r.a.createElement(N,{src:f.drawing}))),r.a.createElement(y,null,g.map(function(e){return r.a.createElement(h,{key:e.id,onClick:function(){return I(e)}},"Next Panel",r.a.createElement(N,{src:e.drawing}))}),g.length<2&&r.a.createElement(h,{onClick:function(){u(function(e){var t=e.slice(0);return t[n].nextIds.push(t.length),t.push({drawing:"",text:"",prevId:n,nextIds:[],id:t.length}),t})}},"Add Panel")))))};function V(){var e=Object(k.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background: ",";\n  }\n\n  #root {\n    display: flex;\n    height: 100vh;\n  }\n"]);return V=function(){return e},e}var L=Object(p.a)(V(),g.primary),P=Object(c.hot)(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,null),r.a.createElement(U,null))});o.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.d4c41d9b.chunk.js.map