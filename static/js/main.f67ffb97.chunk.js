(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(34)},34:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(17),r=n.n(i),c=n(20),l=n(5),d=n(2),s=n(7),u=n.n(s);n(28);u.a.initializeApp({apiKey:"AIzaSyC5mVxaorL_LmNWasC5LNmAC3cmlQ-5vFM",authDomain:"story-maker-85706.firebaseapp.com",databaseURL:"https://story-maker-85706.firebaseio.com",projectId:"story-maker-85706",storageBucket:"story-maker-85706.appspot.com",messagingSenderId:"105986550181",appId:"1:105986550181:web:81ec40d053faad45"});var m=u.a.database(),p=n(1),f=n(4),h={primary:"#1c4265",primaryVariant:Object(f.a)(.15,"#1c4265"),secondary:Object(f.b)(.5,"#1c4265"),secondaryVariant:Object(f.b)(.15,"#1c4265")},y=p.c.button.withConfig({displayName:"UIstyle__ButtonBase",componentId:"velvdk-0"})(["all:unset;background:",";margin:5px;text-align:center;cursor:pointer;border:solid 3px ",";:hover{border-color:",";}:active{background:",";}"],h.secondaryVariant,h.secondaryVariant,h.primaryVariant,h.primary),g=Object(p.c)(y).withConfig({displayName:"UIstyle__Button",componentId:"velvdk-1"})(["flex:1;border-radius:5px;padding:7px;"]),v=Object(p.c)(y).withConfig({displayName:"UIstyle__RoundButton",componentId:"velvdk-2"})(["border-radius:100%;flex:unset;overflow:hidden;height:80px;width:80px;"]),b=p.c.div.withConfig({displayName:"UIstyle__Base",componentId:"velvdk-3"})(["display:flex;justify-content:center;"]),x=Object(p.c)(b).withConfig({displayName:"UIstyle__Row",componentId:"velvdk-4"})([""]),w=Object(p.c)(b).withConfig({displayName:"UIstyle__Column",componentId:"velvdk-5"})(["flex:1;flex-direction:column;"]),I=Object(p.c)(x).withConfig({displayName:"Homestyle__Wrapper",componentId:"sc-1vl6oc7-0"})(["background:",";color:",";flex:1;@media (orientation:portrait){flex-direction:column;}"],h.primary,h.secondary),j=p.c.textarea.withConfig({displayName:"Homestyle__TextInput",componentId:"sc-1vl6oc7-1"})(["all:unset;background:",";padding:10px;border-radius:10px;margin:5px;height:55px;::placeholder{color:","}"],h.primaryVariant,h.secondaryVariant);var C=function(e,t){var n=[],a=t.x-e.x,o=t.y-e.y,i=Math.abs(a),r=Math.abs(o),c=a>0?1:-1,l=o>0?1:-1,d=0;if(i>r)for(var s=e.x,u=e.y;c<0?s>=t.x:s<=t.x;s+=c)n.push({x:s,y:u}),(d+=r)<<1>=i&&(u+=l,d-=i);else for(var m=e.x,p=e.y;l<0?p>=t.y:p<=t.y;p+=l)n.push({x:m,y:p}),(d+=i)<<1>=r&&(m+=c,d-=r);return n},O=p.c.div.withConfig({displayName:"Drawingstyle__Wrapper",componentId:"sc-1makj1j-0"})(["flex:1;background:",";position:relative;overflow:hidden;margin:5px;border-radius:10px;overflow:hidden;"],h.secondaryVariant),k=p.c.img.withConfig({displayName:"Drawingstyle__DrawingImage",componentId:"sc-1makj1j-1"})(["width:100%;height:100%;object-fit:contain;position:absolute;top:0;left:0;image-rendering:pixelated;"]),_=p.c.canvas.withConfig({displayName:"Drawingstyle__Canvas",componentId:"sc-1makj1j-2"})(["cursor:crosshair;width:100%;height:100%;position:absolute;top:0;left:0;opacity:0;touch-action:none;"]),E={width:80,height:60},U=function(e){var t=e.onChange,n=e.dataURL,i=Object(a.useState)(),r=Object(d.a)(i,2),c=r[0],l=r[1],s=Object(a.useState)(),u=Object(d.a)(s,2),m=u[0],p=u[1],f=Object(a.useState)(!1),y=Object(d.a)(f,2),g=y[0],v=y[1],b=Object(a.useState)(),x=Object(d.a)(b,2),w=x[0],I=x[1];function j(e){if(c&&m){var n=function(e){var t=m.getBoundingClientRect(),n=t.width,a=t.height,o=t.left,i=t.top,r=E.height/E.width,c=a/n,l=r<c?n/E.width:a/E.height,d={x:o,y:i};return r>c?d.x+=(n-E.width*l)/2:d.y+=(a-E.height*l)/2,{x:Math.floor((e.clientX-d.x)/l),y:Math.floor((e.clientY-d.y)/l)}}(e),a=C(w||n,n),o=!0,i=!1,r=void 0;try{for(var l,d=a[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var s=l.value;c.fillRect(s.x,s.y,1,1)}}catch(u){i=!0,r=u}finally{try{o||null==d.return||d.return()}finally{if(i)throw r}}t(m.toDataURL()),I(n)}}function U(){v(!0)}function N(){v(!1),I(void 0)}return Object(a.useEffect)(function(){if(c&&m&&(n||(c.fillStyle=h.secondary,c.fillRect(0,0,m.width,m.height),t(m.toDataURL())),c.fillStyle=h.primary,!g)){var e=new Image;e.onload=function(){c.drawImage(e,0,0)},e.src=n}},[c,m,n,g,t]),o.a.createElement(O,null,n&&o.a.createElement(k,{src:n}),o.a.createElement(_,{ref:function(e){!e||m||c||(p(e),l(e.getContext("2d")||void 0))},onMouseMove:function(e){g&&j(e)},onTouchMove:function(e){j(e.touches[0])},onTouchStart:function(e){U(),j(e.touches[0])},onMouseDown:function(e){U(),j(e)},onMouseUp:N,onTouchEnd:N,onMouseOut:N,width:E.width,height:E.height}))},N=Object(p.c)(w).withConfig({displayName:"PanelConnectionsstyle__Wrapper",componentId:"sc-1hygbo8-0"})(["flex-direction:column;margin:10px;display:flex;flex:unset;@media (orientation:portrait){flex-direction:row;}"]),R=Object(p.c)(x).withConfig({displayName:"PanelConnectionsstyle__PanelsWrapper",componentId:"sc-1hygbo8-1"})(["@media (orientation:portrait){flex-direction:column;}align-items:center;justify-content:center;"]),L=p.c.div.withConfig({displayName:"PanelConnectionsstyle__NewPannelText",componentId:"sc-1hygbo8-2"})(["margin-top:-22px;font-size:5em;"]),S=n(3);function P(){var e=Object(S.a)(["\n  width: 100%;\n  height: 100%;\n"]);return P=function(){return e},e}var M=Object(p.b)(P()),D=p.c.img.withConfig({displayName:"Thumbnailstyle__ThumbnailImage",componentId:"sc-33co5w-0"})([""," flex:1;"],M),B=p.c.div.withConfig({displayName:"Thumbnailstyle__Placeholder",componentId:"sc-33co5w-1"})([""," padding-bottom:75%;background-color:",";"],M,h.secondary),T=function(e){var t=e.src;return t?o.a.createElement(D,{src:t}):o.a.createElement(B,null)},V=function(e){var t=e.currentPanel,n=e.prevPanel,a=e.nextPanels,i=e.onConnectionClick,r=e.onNewPanelClick;return o.a.createElement(N,null,n&&o.a.createElement(R,null,o.a.createElement(v,{onClick:function(){return i(n)}},o.a.createElement(T,{src:n.dataURL}))),o.a.createElement(R,null,o.a.createElement(v,null,o.a.createElement(T,{src:t.dataURL}))),o.a.createElement(R,null,a.map(function(e){return o.a.createElement(v,{key:e.id,onClick:function(){return i(e)}},o.a.createElement(T,{src:e.dataURL}))}),a.length<2&&o.a.createElement(v,{onClick:r},o.a.createElement(L,null,"+"))))},F=function(){var e=Object(a.useState)(0),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)([{dataURL:"",text:"",nextIds:[],id:0}]),c=Object(d.a)(r,2),s=c[0],u=c[1],p=s[n],f=void 0!==p.prevId?s[p.prevId]:void 0,h=p.nextIds.map(function(e){return s[e]});return o.a.createElement(I,null,o.a.createElement(w,null,o.a.createElement(U,{onChange:function(e){u(function(t){var a=t.slice(0);return a[n]=Object(l.a)({},a[n],{dataURL:e}),a})},dataURL:p.dataURL}),o.a.createElement(j,{onChange:function(e){var t=s.slice(0);t[n]=Object(l.a)({},t[n],{text:e.target.value}),u(t)},value:p.text,placeholder:"Insert panel text here"}),o.a.createElement(x,null,o.a.createElement(g,{onClick:function(){m.ref("stories").limitToLast(1).once("value").then(function(e){var t=e.val();if(t){var n=Object.values(t)[0].panels;u(n.map(function(e){return{nextIds:JSON.parse(e.nextIds),dataURL:e.dataURL,text:e.text,prevId:e.prevId,id:e.id}}))}})}},"[Load From Database]"),o.a.createElement(g,{onClick:function(){var e={panels:s.map(function(e){return Object(l.a)({nextIds:JSON.stringify(e.nextIds),dataURL:e.dataURL,text:e.text,id:e.id},void 0!==e.prevId?{prevId:e.prevId}:{})})};m.ref("stories").push(e).then(function(){return console.log("done publishing")})}},"Publish"))),o.a.createElement(V,{prevPanel:f,currentPanel:p,nextPanels:h,onConnectionClick:function(e){i(e.id)},onNewPanelClick:function(){u(function(e){var t=e.slice(0);return t[n].nextIds.push(t.length),t.push({dataURL:"",text:"",prevId:n,nextIds:[],id:t.length}),t})}}))};function W(){var e=Object(S.a)(["\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    background: ",";\n  }\n\n  #root {\n    display: flex;\n    height: 100vh;\n  }\n\n  *{\n    user-select: none;\n  }\n"]);return W=function(){return e},e}var z=Object(p.a)(W(),h.primary),J=Object(c.hot)(function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(z,null),o.a.createElement(F,null))});r.a.render(o.a.createElement(J,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.f67ffb97.chunk.js.map